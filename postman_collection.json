{
	"info": {
		"_postman_id": "1ac4ec63-bc36-4543-9693-da63db00c614",
		"name": "ADS API",
		"description": "Collection complète pour l'API de petites annonces avec authentification JWT",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "17652814"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Register",
					"request": {
						"auth": {
							"type": "bearer"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"van damme\",\n  \"email\": \"damme@example.com\",\n  \"password\": \"password123\",\n  \"password_confirmation\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{prod_url}}/auth/register",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"auth",
								"register"
							]
						},
						"description": "**Inscription utilisateur**\n\n**Auth required:** Non\n\n**Body parameters:**\n- `name` (string, required): Nom complet\n- `email` (string, required): Email unique\n- `password` (string, required): Mot de passe (min 8 caractères)\n- `password_confirmation` (string, required): Confirmation du mot de passe\n\n**Response:** Utilisateur créé + token JWT"
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"if (response.access_token) {",
									"    pm.collectionVariables.set('token', response.access_token);",
									"    console.log('Token saved:', response.access_token);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"damme@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{prod_url}}/auth/login",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "**Connexion utilisateur**\n\n**Auth required:** Non\n\n**Body parameters:**\n- `email` (string, required): Email de l'utilisateur\n- `password` (string, required): Mot de passe\n\n**Response:** Token JWT + informations utilisateur\n\n**Note:** Le token est automatiquement sauvegardé dans la variable {{token}}"
					},
					"response": []
				},
				{
					"name": "Me",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/auth/me",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"auth",
								"me"
							]
						},
						"description": "**Récupérer utilisateur connecté**\n\n**Auth required:** Oui (auth:api)\n\n**Headers:**\n- `Authorization: Bearer {{token}}`\n\n**Response:** Informations de l'utilisateur authentifié"
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"if (response.access_token) {",
									"    pm.collectionVariables.set('token', response.access_token);",
									"    console.log('Token refreshed:', response.access_token);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/auth/refresh",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"auth",
								"refresh"
							]
						},
						"description": "**Rafraîchir token JWT**\n\n**Auth required:** Oui (auth:api)\n\n**Headers:**\n- `Authorization: Bearer {{token}}`\n\n**Response:** Nouveau token JWT\n\n**Note:** Le nouveau token est automatiquement sauvegardé"
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/auth/logout",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"auth",
								"logout"
							]
						},
						"description": "**Déconnexion**\n\n**Auth required:** Oui (auth:api)\n\n**Headers:**\n- `Authorization: Bearer {{token}}`\n\n**Response:** Message de confirmation\n\n**Note:** Invalide le token JWT côté serveur"
					},
					"response": []
				}
			],
			"description": "Gestion de l'authentification avec JWT"
		},
		{
			"name": "Category",
			"item": [
				{
					"name": "List Categories",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/categories",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"categories"
							]
						},
						"description": "**Lister toutes catégories**\n\n**Auth required:** Non\n\n**Response:** Liste complète des catégories disponibles\n\n**Use case:** Afficher les catégories dans un dropdown ou menu"
					},
					"response": []
				},
				{
					"name": "Create Category",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Smartphones\"\n}"
						},
						"url": {
							"raw": "{{prod_url}}/categories",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"categories"
							]
						},
						"description": "**Créer une catégorie**\n\n**Auth required:** Oui (auth:api)\n\n**Body parameters:**\n- `name` (string, required): Nom unique de la catégorie\n\n**Validation:**\n- Le nom doit être unique dans la table categories\n\n**Response:** Catégorie créée avec son ID"
					},
					"response": []
				},
				{
					"name": "Update Category",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"transport\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/categories/4",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"categories",
								"4"
							]
						},
						"description": "**Mettre à jour une catégorie**\n\n**Auth required:** Oui (auth:api)\n\n**URL parameters:**\n- `id` (integer, required): ID de la catégorie\n\n**Body parameters:**\n- `name` (string, required): Nouveau nom (doit rester unique)\n\n**Response:** Catégorie mise à jour"
					},
					"response": []
				},
				{
					"name": "Delete Category",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/categories/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"categories",
								"1"
							]
						},
						"description": "**Supprimer une catégorie**\n\n**Auth required:** Oui (auth:api)\n\n**URL parameters:**\n- `id` (integer, required): ID de la catégorie\n\n**Response:** 204 No Content\n\n**Note:** Assurez-vous qu'aucune annonce n'utilise cette catégorie"
					},
					"response": []
				}
			],
			"description": "CRUD des catégories d'une annonce"
		},
		{
			"name": "Ad",
			"item": [
				{
					"name": "List Ads",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/ads?page=1&per_page=10",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"ads"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"description": "Numéro de page"
								},
								{
									"key": "per_page",
									"value": "10",
									"description": "Nombre d'éléments par page"
								}
							]
						},
						"description": "**Lister toutes annonces**\n\n**Auth required:** Non\n\n**Query parameters:**\n\n- `page` (integer, optional): Numéro de page (défaut: 1)\n    \n- `per_page` (integer, optional): Éléments par page (défaut: 10)\n    \n\n**Response:** Liste paginée des annonces avec métadonnées"
					},
					"response": []
				},
				{
					"name": "Search Ads",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": []
						},
						"url": {
							"raw": "{{prod_url}}/ads/search?category_id=1&min_price=500&sort=oldest",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"ads",
								"search"
							],
							"query": [
								{
									"key": "category_id",
									"value": "1"
								},
								{
									"key": "min_price",
									"value": "500"
								},
								{
									"key": "sort",
									"value": "oldest"
								}
							]
						},
						"description": "**Recherche intelligente**\n\n**Auth required:** Non\n\n**Query parameters:**\n\n- `q` (string, optional): Terme de recherche (titre, description)\n    \n- `category_id` (integer, optional): ID de la catégorie\n    \n- `min_price` (decimal, optional): Prix minimum\n    \n- `max_price` (decimal, optional): Prix maximum\n    \n- `max_price` (string, optional): Tri des résultats (`price_asc`, `price_desc`, oldest,`latest)`\n    \n\n**Response:** Annonces filtrées selon critères"
					},
					"response": []
				},
				{
					"name": "Show Ad",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/ads/2",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"ads",
								"2"
							]
						},
						"description": "**Détail annonce**\n\n**Auth required:** Non\n\n**URL parameters:**\n- `id` (integer, required): ID de l'annonce\n\n**Response:** Détails complets de l'annonce avec relations (auteur, catégorie, commentaires)"
					},
					"response": []
				},
				{
					"name": "Create Ad",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Redmi Note\",\n  \"description\": \"Redmi Phone neuf\",\n  \"price\": 1099.99,\n  \"category_id\": 1\n}"
						},
						"url": {
							"raw": "{{prod_url}}/ads",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"ads"
							]
						},
						"description": "**Créer annonce**\n\n**Auth required:** Oui (auth:api)\n\n**Body parameters:**\n\n- `title` (string, required): Titre de l'annonce\n    \n- `description` (text, required): Description détaillée\n    \n- `price` (decimal, required): Prix en devise locale\n    \n- `category_id` (integer, required): ID de la catégorie\n    \n\n**Response:** Annonce créée avec ID et user_id de l'auteur"
					},
					"response": []
				},
				{
					"name": "Update Ad",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"iPhone 13 Pro - Prix réduit\",\n  \"description\": \"iPhone en excellent état, jamais réparé. Prix négociable.\",\n  \"price\": 649.99,\n  \"category_id\": 1\n}"
						},
						"url": {
							"raw": "{{prod_url}}/ads/2",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"ads",
								"2"
							]
						},
						"description": "**Modifier annonce (auteur)**\n\n**Auth required:** Oui (auth:api)\n\n**URL parameters:**\n- `id` (integer, required): ID de l'annonce\n\n**Body parameters:**\n- Mêmes paramètres que la création (tous optionnels)\n\n**Authorization:** Seul l'auteur peut modifier son annonce\n\n**Response:** Annonce mise à jour"
					},
					"response": []
				},
				{
					"name": "Delete Ad",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/ads/5",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"ads",
								"5"
							]
						},
						"description": "**Supprimer annonce (auteur)**\n\n**Auth required:** Oui (auth:api)\n\n**URL parameters:**\n- `id` (integer, required): ID de l'annonce\n\n**Authorization:** Seul l'auteur peut supprimer son annonce\n\n**Response:** 204 No Content"
					},
					"response": []
				}
			],
			"description": "Gestion des annonces"
		},
		{
			"name": "Comment",
			"item": [
				{
					"name": "List Comments",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/ads/2/comments",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"ads",
								"2",
								"comments"
							]
						},
						"description": "**Lister commentaires d'une annonce**\n\n**Auth required:** Non\n\n**URL parameters:**\n- `adId` (integer, required): ID de l'annonce\n\n**Response:** Liste des commentaires avec informations sur les auteurs"
					},
					"response": []
				},
				{
					"name": "Create Comment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"content\": \"Est-ce que le prix est négociable ?\"\n}"
						},
						"url": {
							"raw": "{{prod_url}}s/ads/2/comments",
							"host": [
								"{{prod_url}}s"
							],
							"path": [
								"ads",
								"2",
								"comments"
							]
						},
						"description": "**Ajouter commentaire**\n\n**Auth required:** Oui (auth:api)\n\n**URL parameters:**\n- `adId` (integer, required): ID de l'annonce\n\n**Body parameters:**\n- `content` (text, required): Contenu du commentaire\n\n**Response:** Commentaire créé avec user_id et ad_id"
					},
					"response": []
				},
				{
					"name": "Delete Comment",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/comments/2",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"comments",
								"2"
							]
						},
						"description": "**Supprimer son propre commentaire**\n\n**Auth required:** Oui (auth:api)\n\n**URL parameters:**\n- `id` (integer, required): ID du commentaire\n\n**Authorization:** Seul l'auteur peut supprimer son commentaire\n\n**Response:** 204 No Content"
					},
					"response": []
				}
			],
			"description": "Gestion des commentaires sur les annonces"
		},
		{
			"name": "Order",
			"item": [
				{
					"name": "Create Order",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"ad_id\" : 4 \r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{prod_url}}/orders",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"orders"
							],
							"query": [
								{
									"key": "",
									"value": null,
									"disabled": true
								}
							]
						},
						"description": "**Passer commande**\n\n**Auth required:** Oui\n\n**Body parameters:**\n\n- `ad_id` (integer, required): ID de l'annonce\n    \n\n**Response:** Commande créée avec statut 'pending'\n\n**Note:** L'utilisateur connecté devient l'acheteur (buyer_id)\n\nle seller_id porvient de l'annonce"
					},
					"response": []
				},
				{
					"name": "My Orders",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/orders/me",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"orders",
								"me"
							]
						},
						"description": "**Lister commandes acheteur ou vendeur**\n\n**Auth required:** Oui\n\n**Response:** Commandes où l'utilisateur est acheteur OU vendeur\n\n**Use case:** Tableau de bord personnel des transactions"
					},
					"response": []
				},
				{
					"name": "Confirm Order",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/orders/4/confirm",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"orders",
								"4",
								"confirm"
							]
						},
						"description": "**Confirmer commande (vendeur)**\n\n**Auth required:** Oui\n\n**URL parameters:**\n\n- `id` (integer, required): ID de la commande\n    \n\n**Authorization:** Seul le vendeur de l'annonce peut confirmer\n\n**Response:** Commande avec statut 'confirmed'\n\n**Use case:** Le vendeur accepte la transaction"
					},
					"response": []
				},
				{
					"name": "Cancel Order",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{prod_url}}/orders/4/cancel",
							"host": [
								"{{prod_url}}"
							],
							"path": [
								"orders",
								"4",
								"cancel"
							]
						},
						"description": "**Annuler commande (acheteur ou vendeur)**\n\n**Auth required:** Oui (auth:api)\n\n**URL parameters:**\n- `id` (integer, required): ID de la commande\n\n**Authorization:** L'acheteur OU le vendeur peut annuler\n\n**Response:** Commande avec statut 'cancelled'\n\n**Use case:** Annulation par l'une des parties"
					},
					"response": []
				}
			],
			"description": "Gestion des commandes entre acheteurs et vendeurs"
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:8000/api"
		},
		{
			"key": "token",
			"value": ""
		},
		{
			"key": "prod_url",
			"value": ""
		},
		{
			"value": ""
		}
	]
}